{"version":3,"file":"4.3a618f81d1025f28b862.hot-update.js","sources":["webpack:///utils/withRematch.js"],"sourcesContent":["import React from 'react'\nimport { connect, Provider } from 'react-redux'\n\nconst __NEXT_REMATCH_STORE__ = '__NEXT_REMATCH_STORE__'\n\n// https://github.com/iliakan/detect-node\nconst checkServer = () =>\n  Object.prototype.toString.call(global.process) === '[object process]'\n\nconst getOrCreateStore = (initStore, initialState) => {\n  // Always make a new store if server\n  if (checkServer() || typeof window === 'undefined') {\n    return initStore(initialState)\n  }\n\n  // Memoize store in global variable if client\n  if (!window[__NEXT_REMATCH_STORE__]) {\n    window[__NEXT_REMATCH_STORE__] = initStore(initialState)\n  }\n  return window[__NEXT_REMATCH_STORE__]\n}\n\nexport default (...args) => Component => {\n  // First argument is initStore, the rest are redux connect arguments and get passed\n  const [initStore, ...connectArgs] = args\n\n  const ComponentWithRematch = (props = {}) => {\n    const { store, initialProps, initialState } = props\n\n    // Connect page to redux with connect arguments\n    const ConnectedComponent = connect.apply(null, connectArgs)(Component)\n\n    // Wrap with redux Provider with store\n    // Create connected page with initialProps\n    return React.createElement(\n      Provider,\n      {\n        store:\n          store && store.dispatch\n            ? store\n            : getOrCreateStore(initStore, initialState)\n      },\n      React.createElement(ConnectedComponent, initialProps)\n    )\n  }\n\n  ComponentWithRematch.getInitialProps = async (props = {}) => {\n    const isServer = checkServer()\n    const store = getOrCreateStore(initStore)\n\n    // Run page getInitialProps with store and isServer\n    const initialProps = Component.getInitialProps\n      ? await Component.getInitialProps({ ...props, isServer, store })\n      : {}\n\n    return {\n      store,\n      initialState: store.getState(),\n      initialProps\n    }\n  }\n\n  return ComponentWithRematch\n}\n\n\n\n// WEBPACK FOOTER //\n// utils/withRematch.js"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAGA;AACA;AAAA;AAGA;AADA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAMA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAKA;AALA;AAUA;AACA;AACA;AAHA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AAzCA;;;;;A","sourceRoot":""}